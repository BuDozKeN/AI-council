/**
 * AdminPortal - Mobile Responsive & Dark Mode
 *
 * Mobile layout and dark mode overrides.
 * Split from AdminPortal.css for CSS budget compliance.
 */

/* =============================================================================
   MOBILE RESPONSIVE
   Note: Using 768px instead of 641px because sidebar (260px) leaves insufficient
   space for content at narrower widths. At 768px we have ~508px for content,
   which is the minimum usable width for admin tables.
   ============================================================================= */

/* Tablet breakpoint - add bottom padding for fixed bottom nav */
@media (width <= 1024px) {
  .admin-main {
    /* Bottom padding to account for fixed bottom nav (72px nav + 16px spacing) */
    padding-bottom: 88px;
  }
}

@media (width <= 640px) {
  .admin-portal {
    flex-direction: column;
  }

  .admin-sidebar {
    width: 100%;
    min-width: 100%;
    border-right: none;
    border-bottom: none; /* Remove border - cleaner look */
    background: var(--color-bg-primary); /* Match main bg */
  }

  /* Mobile header - consistent padding */
  .admin-sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-3) var(--space-4);
    background: var(--color-bg-primary);
  }

  .admin-sidebar-header .admin-back-link {
    order: 1;
  }

  .admin-sidebar-header .admin-title {
    display: none; /* Hide "Admin Portal" title on mobile - save space */
  }

  /* Mobile nav - horizontal with consistent padding.
     UXH-165/166: Horizontal scrollable tabs for 6+ admin tabs */
  .admin-nav {
    flex-direction: row;
    overflow-x: auto;
    gap: var(--space-1);
    padding: var(--space-2) var(--space-4); /* Match header padding */
    padding-right: var(--space-8); /* Extra padding for scroll fade */
    scrollbar-width: none; /* Firefox */
    background: var(--color-bg-primary);
    border-bottom: 1px solid var(--color-border);
    position: relative;
  }

  /* Scroll fade indicator - shows more tabs to the right */
  .admin-nav::after {
    content: '';
    position: sticky;
    right: 0;
    flex-shrink: 0;
    width: 32px;
    height: 100%;
    background: linear-gradient(to right, transparent, var(--color-bg-primary));
    pointer-events: none;
  }

  .admin-nav::-webkit-scrollbar {
    display: none; /* Chrome, Safari */
  }

  .admin-nav-item {
    flex-shrink: 0;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    padding: var(--space-2) var(--space-3);
    width: auto;
    min-width: 56px;
    min-height: 52px; /* Touch target */
    border-radius: var(--radius-md);
  }

  .admin-nav-item span {
    display: block;
    font-size: 12px; /* P3: 10px → 11px (ISS-050) → 12px for mobile readability */
    white-space: nowrap;
  }

  /* UXH-165/166: Larger icons for better visibility in horizontal scroll */
  .admin-nav-icon {
    width: 24px;
    height: 24px;
  }

  /* Hide user info on mobile - declutter */
  .admin-sidebar-footer {
    display: none;
  }

  /* Main content - no card appearance on mobile */
  .admin-main {
    background: var(--color-bg-primary);
  }

  .admin-content {
    padding: 0; /* Remove padding - content handles its own */
  }

  /* Remove card styling on mobile - flat layout */
  .admin-tab-panel {
    background: transparent;
    border: none;
    border-radius: 0;
  }

  /* Compact header on mobile - single row with title + action button */
  .admin-tab-header {
    flex-direction: row;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    border-bottom: 1px solid var(--color-border);
    background: var(--color-bg-primary);
  }

  .admin-section-title {
    font-size: var(--font-size-base);
    margin: 0;
    flex: 1;
  }

  /* Hide description on mobile to save space */
  .admin-section-desc {
    display: none;
  }

  .admin-search-box {
    width: 100%;
  }

  .admin-search-input {
    width: 100%;
    min-height: 44px; /* Touch target */
  }
}

/* =============================================================================
   DARK MODE
   ============================================================================= */

.dark .admin-portal {
  background: var(--color-bg-primary);
}

.dark .admin-sidebar {
  background: var(--color-bg-secondary);
  border-color: var(--color-border);
}

.dark .admin-nav-item--active {
  background: var(--overlay-white-10);
}

.dark .admin-tab-panel {
  background: var(--color-bg-secondary);
}

.dark .admin-search-input {
  background: var(--color-bg-tertiary);
}

/* =============================================================================
   UXH-172: MOBILE BOTTOM NAVIGATION
   Mirrors MobileBottomNav pattern for consistency across app
   ============================================================================= */

@media (width <= 640px) {
  /* Safe area inset only (nav is now a hidden drag-up tray) */
  .admin-main {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Hide top horizontal nav on mobile - using bottom nav instead */
  .admin-nav {
    display: none;
  }

  /* Create sticky bottom navigation */
  .admin-sidebar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    z-index: var(--z-fixed);
    display: flex;
    flex-direction: column;
    min-height: auto;
  }

  .admin-sidebar-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: var(--z-fixed);
    padding: var(--space-2-5) var(--space-4);
    border-bottom: 1px solid var(--color-border);
    background: var(--color-bg-primary);
  }

  /* Bottom nav tabs - re-show in bottom position */
  .admin-nav {
    display: flex;
    flex-direction: row;
    justify-content: space-around;
    background: var(--color-bg-primary);
    border-top: 1px solid var(--color-border);
    border-bottom: none;
    padding: var(--space-2) var(--space-2) calc(var(--space-2) + env(safe-area-inset-bottom, 0px));
    overflow-x: visible;
    gap: 0;
  }

  /* Remove scroll fade indicator for bottom nav */
  .admin-nav::after {
    display: none;
  }

  /* Bottom nav items - evenly distributed with short labels */
  .admin-nav-item {
    flex: 1;
    min-width: 0;
    max-width: none; /* was 80px — let flex distribute evenly */
    min-height: 56px;
    padding: var(--space-1) var(--space-0-5);
  }

  /* Hide full labels, show short labels on mobile */
  .admin-nav-item .admin-nav-label-full {
    display: none;
  }

  .admin-nav-item .admin-nav-label-short {
    display: block;
    font-size: 10px;
    line-height: 1.2;
    text-align: center;
  }

  /* P3: Standardized icons at 24px for consistency with horizontal scroll mode */
  .admin-nav-icon {
    width: 24px;
    height: 24px;
  }

  /* Add top padding to content to account for fixed header */
  .admin-content {
    padding-top: 56px;
  }

  /* =============================================================================
     UXH-180/181/182: COMPANIES SECTION - Better header layout on mobile
     ============================================================================= */

  /* Stack header vertically on mobile for more space */
  .admin-tab-header {
    flex-direction: column;
    align-items: stretch;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
  }

  /* Title row - title + action buttons side by side */
  .admin-tab-header > div:first-child {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-2);
  }

  /* Header actions - inline with proper spacing */
  .admin-header-actions {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    justify-content: flex-end;
    flex-shrink: 0;
  }

  /* Search box - full width on separate row */
  .admin-tab-header .admin-search-box {
    width: 100%;
    order: 10; /* Push to bottom */
  }

  .admin-tab-header .admin-search-input {
    width: 100%;
    min-height: 44px;
  }

  /* Reduce empty space by compacting vertical padding */
  .admin-tab-panel {
    margin: 0;
  }

  .admin-tab-panel > .admin-table-container {
    padding: 0;
  }
}
