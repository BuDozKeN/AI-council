/* ============================================================================
   PROJECT MODAL - MOBILE RESPONSIVE
   Note: Base input/button sizing is handled by AppModal.css standardized styles
   ============================================================================ */

@media (width <= 640px) {
  /* Make the pm-modal-body flex container for proper height calculation */
  .app-modal-body.pm-modal-body {
    display: flex;
    flex-direction: column;
    flex: 1 1 0;
    min-height: 0;
    overflow: hidden auto;
    -webkit-overflow-scrolling: touch;
    padding: 0; /* Remove default body padding, form handles it */
  }

  /* Make the app-modal-content expand when it contains pm-modal-body */
  .app-modal-content:has(.pm-modal-body) {
    min-height: 75dvh;
  }

  /* Form fills available space with proper padding */
  .pm-modal-body .pm-form {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    padding: var(--space-5) var(--space-4);
  }

  /* Field spacing - consistent and balanced */
  .pm-modal-body .pm-field {
    margin-bottom: var(--space-5);
  }

  /* AI intro banner - full width, balanced padding */
  .pm-modal-body .pm-ai-intro {
    margin: 0 0 16px;
    padding: var(--space-3-5) var(--space-4);
    border-radius: var(--radius-lg);
  }

  /* Textarea - more breathing room */
  .pm-modal-body .pm-field textarea {
    border-radius: var(--radius-lg);
    padding: var(--space-3-5) var(--space-4);
    min-height: 140px;
  }

  /* Actions - sticky at bottom with proper spacing */
  .pm-modal-body .pm-actions {
    margin-top: auto;
    padding: var(--space-4) 0;
    padding-bottom: calc(16px + env(safe-area-inset-bottom, 0px));
    gap: var(--gap-sm-plus);
    border-top: 1px solid var(--color-border);
  }

  /* Buttons - balanced sizing */
  .pm-modal-body .pm-actions button {
    flex: 1 1 auto;
    min-height: 48px;
    border-radius: var(--radius-lg);
  }

  /* Form padding - tighter on mobile */
  .pm-form {
    padding: var(--space-4);
  }

  /* Context textarea - needs more height than default */
  .pm-context-editor {
    min-height: 150px;
  }

  /* Banners - more compact on mobile */
  .pm-ai-intro,
  .pm-ai-success,
  .pm-manual-badge {
    padding: var(--space-2-5) var(--space-3-5);
    font-size: var(--text-xs-plus);
  }

  /* Actions - allow wrapping */
  .pm-actions {
    flex-wrap: wrap;
    gap: var(--gap-sm);
    padding-top: var(--space-4);
    margin-top: var(--space-4);
  }

  /* Buttons - flex to fill space */
  .pm-actions button {
    flex: 1 1 auto;
  }

  /* Error banner - more compact */
  .pm-error {
    margin: var(--space-3) var(--space-4) 0;
    padding: var(--space-2-5) var(--space-3-5);
    font-size: var(--text-xs-plus);
  }

  /* Field spacing - tighter */
  .pm-field {
    margin-bottom: var(--space-4);
  }

  /* Success state - fit on small screens */
  .pm-success-state {
    padding: var(--space-8) var(--space-4);
    min-height: 160px;
  }

  .pm-success-icon-wrapper {
    width: 60px;
    height: 60px;
    margin-bottom: var(--space-4);
  }

  .pm-success-icon {
    width: 32px;
    height: 32px;
  }

  .pm-success-title {
    font-size: var(--text-lg);
  }
}
