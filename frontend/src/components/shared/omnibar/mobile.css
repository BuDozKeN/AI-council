/* OmniBar - Mobile Responsive */

/* Extracted from OmniBar.css lines 840-993 */

/* =============================================================================
   MOBILE CONTEXT BUTTON (Perplexity-inspired)
   Single button that opens unified context menu - replaces individual icons
   ============================================================================= */

.mobile-context-btn {
  display: flex;
  align-items: center;
  gap: var(--gap-2xs);
  padding: var(--space-1) var(--space-2-5); /* Compact to match mode toggle */
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border-light);
  border-radius: var(--radius-full);
  color: var(--color-text-secondary);
  font-size: var(--text-xs); /* 12px - matches mode toggle */
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
  min-height: 28px; /* Match mode toggle height */
  flex-shrink: 0;
}

.mobile-context-btn:hover:not(:disabled) {
  background: var(--color-bg-hover);
  border-color: var(--color-border-dark);
}

.mobile-context-btn:active:not(:disabled) {
  transform: scale(0.98);
}

.mobile-context-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.mobile-context-btn.has-selection {
  background: var(--color-indigo-50);
  border-color: var(--color-indigo-300);
  color: var(--color-indigo-700);
}

/* Dark mode - base Context button (matches mode toggle styling) */
.dark .mobile-context-btn {
  background: var(--color-bg-secondary);
  border-color: var(--color-border);
  color: var(--color-text-secondary);
}

.dark .mobile-context-btn:hover:not(:disabled) {
  background: var(--color-bg-hover);
  border-color: var(--color-border-dark);
}

.dark .mobile-context-btn.has-selection {
  background: var(--overlay-indigo-15);
  border-color: var(--color-indigo-600);
  color: var(--color-indigo-300);
}

.mobile-context-label {
  white-space: nowrap;
}

/* Standardize mobile context button icon - compact to match mode toggle */
.mobile-context-btn svg {
  width: 14px;
  height: 14px;
}

.mobile-context-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 16px;
  height: 16px;
  padding: 0 4px;
  background: var(--color-indigo-500);
  color: white;
  font-size: 9px; /* Very compact badge */
  font-weight: 700;
  border-radius: var(--radius-full);
}

/* =============================================================================
   MOBILE CONTEXT MENU (Accordion sections inside BottomSheet)
   ============================================================================= */

.mobile-context-menu {
  display: flex;
  flex-direction: column;
  gap: var(--gap-xs);
  padding: var(--space-2);
}

.context-section {
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.context-section-header {
  display: flex;
  align-items: center;
  gap: var(--gap-sm);
  width: 100%;
  padding: var(--space-3-5) var(--space-4);
  background: transparent;
  border: none;
  color: var(--color-text-primary);
  font-size: var(--text-base);
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s ease;
  text-align: left;
}

/* Standardize section header icons (Issue #2 fix) */
.context-section-header > svg:first-child {
  width: 18px;
  height: 18px;
}

.context-section-header:hover {
  background: var(--color-bg-hover);
}

.context-section-header:active {
  background: var(--overlay-black-10);
}

.context-section-header.expanded {
  background: var(--color-bg-hover);
  border-bottom: 1px solid var(--color-border-light);
}

.context-section-label {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.context-section-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  background: var(--color-indigo-500);
  color: white;
  font-size: var(--text-xs); /* 12px - closest to 11px */
  font-weight: 600;
  border-radius: var(--radius-full);
}

.context-section-chevron {
  color: var(--color-text-tertiary);
  transition: transform 0.2s ease;
  flex-shrink: 0;
}

.context-section-chevron.rotated {
  transform: rotate(90deg);
}

.context-section-content {
  padding: var(--space-2);
  padding-top: 0;
}

/* Override nested list styles inside context sections */
.context-section-content .context-popover-list {
  padding: 0;
  gap: var(--gap-xs);
}

.context-section-content .context-popover-item {
  padding: var(--space-3) var(--space-3-5);
  min-height: 48px;
}

/* =============================================================================
   MOBILE ADJUSTMENTS
   ============================================================================= */

@media (width <= 640px) {
  .omni-bar-wrapper {
    max-width: 100%;
  }

  .omni-bar-top {
    padding: var(--space-2-5) var(--space-3) 6px;
  }

  .omni-bar-landing .omni-bar-top {
    padding: var(--space-3) var(--space-3-5) 8px;
  }

  .omni-bar-bottom {
    padding: var(--space-1-5) var(--space-2-5) 10px;
  }

  .omni-bar-landing .omni-bar-bottom {
    padding: var(--space-2) var(--space-3) 12px;
  }

  .omni-bar-input {
    font-size: var(--text-base); /* Prevent iOS zoom */
  }

  .omni-mode-toggle {
    width: 100%;
    justify-content: stretch;
  }

  .omni-mode-btn {
    flex: 1;
  }

  /* On mobile, capsule and toggle should be compact but matching (~32px) */
  .context-icons-capsule {
    padding: var(--space-1) var(--space-1-5);
    gap: var(--gap-2xs);
  }

  /* Icons inside capsule - 22px like desktop, compact */
  .context-icons-capsule .omni-icon-btn {
    width: 22px;
    height: 22px;
    min-width: 22px;
    min-height: 22px;
  }

  /* Attach button - larger touch target */
  .omni-icon-btn.attach {
    width: 36px;
    height: 36px;
  }

  /* Reset button - compact */
  .omni-reset-all {
    width: 28px;
    height: 28px;
  }

  .omni-bar-submit {
    width: 36px;
    height: 36px;
  }

  /* Inline mode toggle - compact to match capsule */
  .omni-inline-mode-toggle {
    padding: var(--space-0-5);
  }

  .inline-mode-indicator {
    padding: var(--space-1) var(--space-2-5);
    font-size: var(--text-xs);
    min-height: unset;
  }

  /* Context popover on mobile - card-style items like DepartmentCheckboxItem */
  .context-popover-list {
    gap: var(--gap-xs-plus); /* Gap between card items */
    padding: var(--space-2);
  }

  .context-popover-item {
    padding: var(--space-3-5) var(--space-4); /* Match DepartmentCheckboxItem mobile padding */
    font-size: var(--text-base); /* Match DepartmentCheckboxItem mobile font */
    min-height: 56px; /* Match DepartmentCheckboxItem mobile height */
    background: var(--color-bg-tertiary); /* Card background - visible in light mode */
    border-radius: var(--radius-lg); /* Match DepartmentCheckboxItem */
  }

  .context-popover-item:active {
    background: var(--color-bg-hover);
    transform: scale(0.98);
  }

  .context-popover-item.selected {
    background: var(--color-bg-hover);
  }

  /* Larger checkbox/radio on mobile */
  .context-popover-checkbox,
  .context-popover-radio {
    width: 22px;
    height: 22px;
    border-radius: var(--radius-md);
  }

  .context-popover-checkbox svg,
  .context-popover-radio svg {
    width: 14px;
    height: 14px;
  }

  /* Larger accordion headers for Playbooks */
  .context-popover-group-header.clickable {
    padding: var(--space-3-5) var(--space-3);
    font-size: var(--text-xs-plus);
    min-height: 48px;
    gap: var(--gap-sm-plus);
  }

  .context-popover-group-header .section-chevron {
    width: 16px;
    height: 16px;
  }

  .context-popover-group-header svg {
    width: 16px;
    height: 16px;
  }

  .context-popover-group-header .section-count {
    font-size: var(--text-xs-plus);
  }

  /* Larger expanded items container */
  .context-popover-group-items {
    margin-left: var(--space-5);
    padding-left: var(--space-3);
    margin-top: var(--space-2);
  }

  /* Items inside expanded sections (Playbooks) */
  .context-popover-group-items .context-popover-item {
    padding: var(--space-3) var(--space-3-5);
    font-size: var(--text-sm-plus);
    min-height: 48px;
  }
}
