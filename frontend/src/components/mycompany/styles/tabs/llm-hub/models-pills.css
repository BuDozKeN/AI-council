/**
 * LLM Hub - Model Pills
 * Extracted from models.css for CSS budget compliance.
 *
 * Contains:
 * - Model pill sizing and CSS custom properties
 * - Select triggers for model dropdowns
 * - Add model buttons and triggers
 * - Exhausted state
 * - Delete overlay and pressing states
 */

/* ==========================================================================
   MODEL PILLS - IDENTICAL sizing for symmetry
   Using high specificity to override select.css defaults

   ARCHITECTURE NOTE: Width is FIXED at 180px across ALL breakpoints.
   Only height changes (36px desktop â†’ 44px mobile for touch targets).
   This prevents the "mobile override trap" where media queries accidentally
   break intentionally consistent sizing.
   ========================================================================== */

/*
 * CSS Custom Properties for model pill sizing
 * --llm-pill-width: FIXED - never changes across breakpoints
 * --llm-pill-height: Changes for mobile touch targets (44px minimum)
 */
[data-llm-select] {
  --llm-pill-width: 180px; /* FIXED - do not override in media queries */
  --llm-pill-height: 36px; /* Desktop default, mobile overrides to 44px */
}

/* LLM Model Select - uses [data-llm-select] parent and select-trigger--llm-model class
   to completely isolate from generic select.css styles */
[data-llm-select] .select-trigger {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: var(--gap-sm);
  width: var(--llm-pill-width);
  min-width: var(--llm-pill-width);
  max-width: var(--llm-pill-width);
  height: var(--llm-pill-height);
  min-height: var(--llm-pill-height);
  max-height: var(--llm-pill-height);
  padding: 0 var(--space-3);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: var(--text-xs-plus);
  font-weight: 500;
  color: var(--color-text-primary);
  cursor: pointer;
  transition: all 0.15s ease;
  user-select: none;
  box-shadow: none;
}

[data-llm-select] .select-trigger:hover {
  border-color: var(--color-border-dark);
  background: var(--color-bg-secondary);
}

/* Add button - IDENTICAL size to dropdowns (uses same CSS vars) */
.llm-model-grid .llm-model-add,
.llm-model-chain .llm-model-add {
  --llm-pill-width: 180px; /* Same as [data-llm-select] */
  --llm-pill-height: 36px;

  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--gap-sm);
  width: var(--llm-pill-width);
  min-width: var(--llm-pill-width);
  max-width: var(--llm-pill-width);
  height: var(--llm-pill-height);
  min-height: var(--llm-pill-height);
  max-height: var(--llm-pill-height);
  padding: 0 var(--space-3);
  background: var(--color-bg-primary);
  border: 1px dashed var(--color-border);
  border-radius: var(--radius-md);
  font-size: var(--text-xs-plus);
  font-weight: 500;
  color: var(--color-text-tertiary);
  cursor: pointer;
  transition: all 0.15s ease;
  user-select: none;
}

.llm-model-grid .llm-model-add:hover,
.llm-model-chain .llm-model-add:hover {
  border-color: var(--color-brand-primary);
  color: var(--color-brand-primary);
  background: var(--color-bg-secondary);
}

.llm-model-add:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Add Model Select - dropdown trigger styled like dashed button
   NOTE: Inherits --llm-pill-width/height from [data-llm-select] parent */
.llm-model-grid .llm-model-add-trigger.select-trigger,
.llm-model-chain .llm-model-add-trigger.select-trigger {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--gap-sm);

  /* Width/height inherited from parent's CSS vars via [data-llm-select] .select-trigger */
  padding: 0 var(--space-3);
  background: var(--color-bg-primary);
  border: 1px dashed var(--color-border);
  border-radius: var(--radius-md);
  font-size: var(--text-xs-plus);
  font-weight: 500;
  color: var(--color-text-tertiary);
  cursor: pointer;
  transition: all 0.15s ease;
  box-shadow: none;
}

.llm-model-grid .llm-model-add-trigger.select-trigger:hover,
.llm-model-chain .llm-model-add-trigger.select-trigger:hover {
  border-color: var(--color-brand-primary);
  color: var(--color-brand-primary);
  background: var(--color-bg-secondary);
}

.llm-model-add-trigger .llm-model-add-text {
  flex: 1;
  text-align: center;
}

/* Hide the chevron icon on Add trigger */
.llm-model-add-trigger .select-trigger-icon {
  display: none;
}

/* Exhausted state - all models already in use */
.llm-model-add-exhausted {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--gap-sm);
  width: var(--llm-pill-width);
  min-width: var(--llm-pill-width);
  max-width: var(--llm-pill-width);
  height: var(--llm-pill-height);
  min-height: var(--llm-pill-height);
  max-height: var(--llm-pill-height);
  padding: 0 var(--space-3);
  background: var(--color-bg-tertiary);
  border: 1px dashed var(--color-border);
  border-radius: var(--radius-md);
  font-size: var(--text-xs);
  font-weight: 500;
  color: var(--color-text-quaternary);
  cursor: not-allowed;
  opacity: 0.6;
}

.llm-model-select .llm-model-name {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
  text-align: left;
}

.llm-model-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  object-fit: contain;
  border-radius: var(--radius-xs);
}

.select-item .llm-model-icon {
  margin-right: var(--space-2);
}

/* Long-press delete overlay */
.llm-model-delete-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-danger);
  border-radius: var(--radius-md);
  color: var(--color-white);
  font-size: var(--text-xs);
  font-weight: 600;
  cursor: pointer;
  opacity: 0;
  transform: scale(0.95);
  transition: all 0.2s ease;
  pointer-events: none;
  z-index: var(--z-elevated);
}

.llm-model-item.deleting .llm-model-delete-overlay {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
}

/* Visual feedback during long-press */
.llm-model-item.pressing .llm-model-select {
  transform: scale(0.98);
  border-color: var(--color-danger);
}
