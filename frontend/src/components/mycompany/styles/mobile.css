/**
 * MyCompany Mobile Responsive Styles
 * Bottom navigation, touch targets, safe areas, mobile-optimized layouts
 *
 * Key features:
 * 1. Bottom navigation tabs (thumb zone)
 * 2. Always-visible actions (no hover dependency)
 * 3. 44px minimum touch targets (Apple HIG / Material Design)
 * 4. Safe area handling for notched devices
 * 5. Touch-friendly patterns
 */

/* ============================================================================
   MOBILE TOC - Hidden on desktop, shown on mobile
   ============================================================================ */

/* Hide mobile TOC trigger on desktop (sticky variant is used instead) */
.mc-mobile-toc.stage3-mobile-toc-trigger {
  display: none;
}

/* ============================================================================
   P0-1: BOTTOM NAVIGATION TABS (â‰¤768px)
   Move tabs from mid-screen to bottom for thumb reach
   ============================================================================ */

@media (max-width: 768px) {
  /* Restructure panel layout for bottom nav */
  .mc-panel {
    display: flex;
    flex-direction: column;
  }

  /* Move tabs to bottom */
  .mc-tabs {
    order: 3; /* After content */
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: var(--z-dropdown);
    background: var(--color-bg-primary);
    border-top: 1px solid var(--color-border);
    border-bottom: none;
    padding: 8px 8px calc(8px + env(safe-area-inset-bottom, 0px)) 8px;
    justify-content: space-around;
    gap: 0;
    box-shadow: var(--shadow-md);
  }

  /* Tab style: icon + label stacked (iOS tab bar style) */
  .mc-tab {
    flex-direction: column;
    gap: 4px;
    padding: 8px 12px;
    min-width: 56px;
    min-height: 50px;
    border-radius: var(--radius-md);
    align-items: center;
    justify-content: center;
  }

  /* Show labels on bottom nav */
  .mc-tab-label {
    display: block;
    font-size: 10px;
    font-weight: 500;
    letter-spacing: 0;
  }

  .mc-tab-icon {
    font-size: 20px;
  }

  /* Active state for bottom nav */
  .mc-tab.active {
    background: var(--color-indigo-light);
    color: var(--color-indigo-500);
  }

  .mc-tab.active::after {
    display: none; /* Remove underline indicator */
  }

  /* Add padding to content to account for fixed bottom nav */
  .mc-content {
    padding: 0;
    padding-bottom: calc(70px + env(safe-area-inset-bottom, 0px));
    order: 2;
    /* Ensure content fills available height */
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
  }

  /* Header stays at top */
  .mc-header {
    order: 1;
  }

  /* Add drag handle indicator at top of panel (swipe down to close) */
  .mc-panel::before {
    content: '';
    position: absolute;
    top: 6px;
    left: 50%;
    transform: translateX(-50%);
    width: 36px;
    height: 4px;
    background: rgba(255, 255, 255, 0.5); /* White for dark header */
    border-radius: var(--radius-xs);
    z-index: var(--z-above);
  }

  /* Adjust header padding to account for drag handle */
  .mc-header {
    padding-top: 20px;
    padding-bottom: 12px;
  }

  /* Compact header on mobile */
  .mc-header h1 {
    font-size: 1rem;
  }

  .mc-title-suffix {
    font-size: 0.75rem;
  }

  /* Hide company switcher label, show icon only */
  .mc-company-switcher {
    margin-top: 4px;
  }

  /* Make close button smaller on mobile */
  .mc-close-btn {
    font-size: 1.25rem;
  }

  /* Prevent browser back gesture */
  .mc-panel {
    overscroll-behavior: contain;
    touch-action: pan-y pinch-zoom;
  }

  .mc-overlay {
    overscroll-behavior: contain;
  }
}

/* ============================================================================
   P0-2: ALWAYS-VISIBLE ACTIONS ON TOUCH DEVICES
   No hover = must show actions always
   ============================================================================ */

@media (hover: none), (max-width: 768px) {
  /* Elegant list row actions - always visible */
  .mc-elegant-actions {
    opacity: 1;
    position: relative;
    right: auto;
    top: auto;
    transform: none;
    background: transparent;
    padding-left: 0;
  }

  /* Date stays visible alongside actions */
  .mc-elegant-row:hover .mc-elegant-date {
    opacity: 1;
    pointer-events: auto;
  }

  /* Compact row actions */
  .mc-row-actions {
    opacity: 1;
  }

  /* Elegant right side: stack date and actions */
  .mc-elegant-right {
    flex-direction: column;
    align-items: flex-end;
    gap: 6px;
    min-width: auto;
  }

  .mc-elegant-date {
    font-size: 11px;
  }

  /* Make action buttons more touch-friendly */
  .mc-text-btn {
    padding: 10px 14px;
    font-size: 13px;
    min-height: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  /* Icon buttons need 44px touch target */
  .mc-icon-btn {
    width: 44px;
    height: 44px;
    min-width: 44px;
    min-height: 44px;
  }
}

/* ============================================================================
   P0-3: 44px MINIMUM TOUCH TARGETS
   Apple HIG / Material Design compliance
   ============================================================================ */

@media (max-width: 768px) {
  /* List rows need adequate touch targets */
  .mc-elegant-row {
    min-height: 56px;
    padding: 14px 16px;
  }

  .mc-compact-row {
    min-height: 52px;
    padding: 12px 14px;
  }

  /* Project rows */
  .mc-project-row {
    min-height: 56px;
    padding: 14px 16px;
  }

  /* Activity rows */
  .mc-activity-row,
  .mc-timeline-item {
    min-height: 52px;
  }

  /* All buttons - enforce 44px minimum */
  .mc-btn,
  .mc-btn-clean,
  .mc-action-btn,
  .mc-text-btn,
  button[class*="mc-"] {
    min-height: 44px;
  }

  /* Filter pills */
  .mc-stat-pill {
    min-height: 44px;
    padding: 10px 14px;
  }

  /* Close button in header */
  .mc-close-btn {
    width: 44px;
    height: 44px;
    min-width: 44px;
    min-height: 44px;
  }

  /* Tab touch targets */
  .mc-tab {
    min-width: 56px;
    min-height: 56px;
  }
}

/* ============================================================================
   P0-4: SAFE AREA HANDLING
   For notched devices (iPhone X+, Android)
   ============================================================================ */

@supports (padding: env(safe-area-inset-bottom)) {
  @media (max-width: 768px) {
    /* Bottom nav respects safe area */
    .mc-tabs {
      padding-bottom: calc(8px + env(safe-area-inset-bottom));
    }

    /* Panel height accounts for safe areas */
    .mc-panel {
      height: calc(100vh - env(safe-area-inset-top, 0px));
      padding-top: env(safe-area-inset-top, 0px);
    }

    /* Modal content safe area */
    .app-modal-content {
      max-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 40px);
    }

    /* Floating action buttons */
    .mc-fab {
      bottom: calc(80px + env(safe-area-inset-bottom));
    }
  }
}

/* ============================================================================
   P0-5: FILTER STACKING ON MOBILE
   Prevent horizontal overflow
   ============================================================================ */

@media (max-width: 640px) {
  /* Filters row on mobile - compact single row */
  .mc-projects-filters {
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    gap: 6px;
    padding: 4px 0;
  }

  .mc-filters-left {
    flex-direction: row;
    flex-wrap: nowrap;
    gap: 6px;
    flex: 1;
    min-width: 0;
  }

  /* Filter dropdowns shrink to content */
  .mc-filters-left > * {
    flex: 0 1 auto;
    min-width: 0;
    max-width: 50%;
  }

  /* Hide "New" button - FAB is used instead */
  .mc-projects-filters .mc-btn-clean,
  .mc-projects-filters > button {
    display: none;
  }

  /* Tab headers - compact on mobile */
  .mc-team-header,
  .mc-playbooks-header,
  .mc-decisions-header {
    flex-direction: row;
    flex-wrap: nowrap;
    gap: 8px;
    padding: 4px 0;
  }

  .mc-team-header span,
  .mc-playbooks-header span,
  .mc-decisions-header span {
    font-size: 0.75rem;
  }

  /* Playbooks filters - compact */
  .mc-playbooks-header {
    gap: 6px;
  }

  /* Hide header buttons on mobile - FAB is used instead */
  .mc-team-header > button,
  .mc-playbooks-header > button {
    display: none;
  }

  /* Decisions filters - responsive row layout */
  .mc-decisions-filters {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    gap: 8px;
    padding: 4px 0;
    align-items: stretch;
  }

  /* Department filter - allow shrink but maintain usability */
  .mc-decisions-filters .mc-dept-filter {
    flex: 0 1 auto;
    min-width: 0;
    max-width: 45%;
  }

  /* Search input takes remaining space */
  .mc-decisions-filters .mc-search-input-wrapper {
    flex: 1 1 auto;
    min-width: 0;
    max-width: none;
  }
}

/* Small mobile - compact layouts (640px and below) */
@media (max-width: 640px) {
  /* Button sizing is handled globally in tailwind.css */
}

/* Extra small mobile - more compact layouts (380px and below) */
@media (max-width: 380px) {
  .mc-decisions-filters {
    gap: 6px;
  }

  .mc-decisions-filters .mc-dept-filter {
    max-width: 40%;
  }

  /* Even tighter content padding on very small screens */
  .mc-content {
    padding: 0;
    padding-bottom: calc(70px + env(safe-area-inset-bottom, 0px));
  }

  .mc-overview-hero {
    padding: 8px 10px;
    gap: 8px;
  }

  .mc-overview .scrollable-content-inner > * + * {
    margin-top: 8px;
  }

  .mc-context-section--compact .mc-context-content .floating-context-content,
  .mc-context-section--compact .floating-context-content {
    padding: 12px;
  }
}

/* ============================================================================
   P0-6: SKELETON LOADERS - Mobile-aware
   ============================================================================ */

@media (max-width: 768px) {
  .mc-skeleton-stats {
    flex-direction: column;
    gap: 8px;
  }

  .mc-skeleton-stats > div,
  .mc-skeleton-stats > * {
    width: 100%;
    height: 60px;
  }

  .mc-skeleton-row {
    min-height: 52px;
  }
}

/* ============================================================================
   ADDITIONAL MOBILE POLISH
   ============================================================================ */

@media (max-width: 768px) {
  /* Stats grid: horizontal scroll cards */
  .mc-projects-stats {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    padding-bottom: 4px;
    margin: 0 -16px;
    padding-left: 16px;
    padding-right: 16px;
  }

  .mc-projects-stats::-webkit-scrollbar {
    display: none;
  }

  .mc-stat-pill {
    flex-shrink: 0;
  }

  /* Elegant list on mobile */
  .mc-elegant-list {
    padding: 2px;
    border-radius: var(--radius-lg);
  }

  .mc-elegant-row {
    border-radius: var(--radius-default);
    gap: 10px;
  }

  /* Content area more room for text */
  .mc-elegant-content {
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
  }

  .mc-elegant-title {
    font-size: 15px;
    -webkit-line-clamp: 2;
  }

  /* Badges wrap nicely */
  .mc-elegant-badges {
    flex-wrap: wrap;
    gap: 6px;
  }

  /* Department badges: limit visible, show +N */
  .mc-dept-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    max-width: 100%;
  }

  .mc-dept-badges > *:nth-child(n+3) {
    display: none;
  }

  .mc-dept-badges-overflow {
    display: inline-flex;
    font-size: 10px;
    padding: 2px 6px;
    background: var(--color-border);
    color: var(--color-text-secondary);
    border-radius: var(--radius-sm);
  }

  /* Empty states: compact on mobile */
  .mc-empty {
    padding: 32px 16px;
  }

  .mc-empty-cta {
    position: fixed;
    bottom: calc(80px + env(safe-area-inset-bottom, 0px));
    right: 16px;
    z-index: var(--z-sticky);
  }
}

/* ============================================================================
   FLOATING ACTION BUTTON (FAB)
   Primary creation action in thumb zone
   ============================================================================ */

.mc-fab {
  display: none; /* Hidden on desktop */
}

@media (max-width: 768px) {
  .mc-fab {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    bottom: calc(80px + env(safe-area-inset-bottom, 0px));
    right: 16px;
    width: 56px;
    height: 56px;
    background: var(--color-indigo-600);
    color: white;
    border: none;
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-lg), 0 0 0 1px rgba(99, 102, 241, 0.2);
    cursor: pointer;
    z-index: var(--z-overlay);
    transition: all 0.2s ease;
  }

  .mc-fab:hover {
    transform: scale(1.05);
    box-shadow:
      0 6px 16px rgba(99, 102, 241, 0.5),
      0 3px 6px rgba(0, 0, 0, 0.15);
  }

  .mc-fab:active {
    transform: scale(0.95);
  }

  .mc-fab svg {
    width: 24px;
    height: 24px;
  }

  /* Hide the inline "New" button when FAB is shown */
  .mc-projects-filters .mc-btn-clean.primary,
  .mc-playbooks-header .mc-btn-clean.primary {
    display: none;
  }
}

/* ============================================================================
   PULL TO REFRESH INDICATOR
   ============================================================================ */

.mc-pull-indicator {
  display: none;
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%) translateY(-100%);
  padding: 12px;
  transition: transform 0.2s ease;
}

.mc-pull-indicator.visible {
  transform: translateX(-50%) translateY(0);
}

.mc-pull-indicator svg {
  width: 24px;
  height: 24px;
  color: var(--color-text-tertiary);
}

.mc-pull-indicator.refreshing svg {
  animation: mc-spin 1s linear infinite;
}

@keyframes mc-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ============================================================================
   SWIPE HINT (visual cue for swipeable items)
   ============================================================================ */

@media (max-width: 768px) {
  .mc-swipe-hint {
    position: absolute;
    right: -4px;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 32px;
    background: var(--color-border-dark);
    border-radius: var(--radius-xs);
    opacity: 0;
    transition: opacity 0.2s ease;
  }

  .mc-elegant-row:first-child .mc-swipe-hint {
    opacity: 0.5;
    animation: swipe-hint 2s ease-in-out infinite;
  }

  @keyframes swipe-hint {
    0%, 100% { transform: translateY(-50%) translateX(0); }
    50% { transform: translateY(-50%) translateX(-4px); }
  }
}

/* ============================================================================
   LANDSCAPE MODE OPTIMIZATIONS
   ============================================================================ */

@media (max-width: 900px) and (orientation: landscape) {
  .mc-panel {
    height: 100vh;
    border-radius: 0;
  }

  /* Bottom nav becomes more compact in landscape */
  .mc-tabs {
    padding: 6px 16px;
  }

  .mc-tab {
    flex-direction: row;
    gap: 6px;
    min-height: 40px;
    padding: 6px 12px;
  }

  .mc-tab-label {
    font-size: 11px;
  }

  .mc-tab-icon {
    font-size: 16px;
  }

  /* More horizontal space for content */
  .mc-content {
    padding: 12px 24px;
    padding-bottom: calc(60px + env(safe-area-inset-bottom, 0px));
  }

  /* Stats in a row in landscape */
  .mc-stats-grid {
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
  }

  .mc-stat-card {
    padding: 10px;
  }

  .mc-stat-value {
    font-size: 1.25rem;
  }
}

/* ============================================================================
   MOBILE-SIMPLIFIED LIST VIEWS
   Clean, scannable rows without clutter
   ============================================================================ */

@media (max-width: 768px) {
  /* ========== OVERVIEW TAB - MOBILE ========== */

  /* Hero section: edge-to-edge layout matching header */
  .mc-overview-hero {
    flex-direction: column;
    gap: 8px;
    padding: 12px 16px;
    border-radius: 0;
    border-left: none;
    border-right: none;
    margin: 0;
  }

  .mc-overview-title {
    font-size: 1rem;
    margin-bottom: 4px;
  }

  .mc-overview-description {
    font-size: 0.75rem;
    line-height: 1.4;
    color: var(--color-text-secondary);
  }

  /* Meta row: horizontal with Edit button */
  .mc-overview-meta {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 12px;
    width: 100%;
  }

  .mc-meta-item {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .mc-meta-label {
    font-size: 0.5625rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-tertiary);
  }

  .mc-meta-value {
    font-size: 0.75rem;
    font-weight: 500;
  }

  /* Edit button positioning - sizing handled globally in tailwind.css */
  .mc-overview-hero button,
  .mc-overview-hero [class*="btn-variant-"] {
    margin-left: auto;
    white-space: nowrap;
  }

  /* Hide stats grid on Overview - users can tap into tabs to see counts */
  .mc-overview .mc-stats-grid {
    display: none;
  }

  /* Context section: fill all remaining height on mobile */
  .mc-context-section--compact {
    flex: 1 1 auto;
    min-height: 0;
    display: flex;
    flex-direction: column;
  }

  .mc-context-section--compact .mc-context-content {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
    /* Remove any max-height constraints */
    max-height: none;
    /* Edge-to-edge on mobile - remove ALL card styling */
    border: none;
    border-radius: 0;
    padding: 0;
    background: transparent;
  }

  /* Ensure the overview tab fills available space */
  .mc-overview {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
  }

  /* Tighter vertical spacing between elements on mobile */
  .mc-overview .scrollable-content-inner > * + * {
    margin-top: 0;
  }

  .mc-overview .scrollable-content-wrapper {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
  }

  .mc-overview .scrollable-content-inner {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
    padding: 0;
  }

  .mc-context-section--compact .scrollable-content-inner {
    padding: 0;
  }

  /* Context content wrapper (FloatingContextActions with .mc-context-content class) */
  .mc-context-section--compact .mc-context-content {
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
  }

  /* The actual scrollable content inside FloatingContextActions */
  .mc-context-section--compact .mc-context-content .floating-context-content,
  .mc-context-section--compact .floating-context-content {
    flex: 1;
    min-height: 0;
    padding: 16px;
    /* Edge-to-edge: remove ALL card styling */
    border: none;
    border-radius: 0;
    background: var(--color-bg-primary);
    max-height: none;
  }

  /* Mobile TOC trigger - show in sticky row (parent handles sticky) */
  .mc-mobile-toc.stage3-mobile-toc-trigger {
    display: inline-flex;
  }

  /* Hide desktop sticky TOC on mobile */
  .floating-sticky-row .toc-sticky-wrapper {
    display: none;
  }

  /* Sticky row - smaller padding on mobile */
  .floating-sticky-row {
    padding: 8px 0;
    margin-left: -16px;
    margin-right: -16px;
    padding-left: 16px;
    padding-right: 16px;
    width: calc(100% + 32px);
  }

  /* Mobile background for sticky row */
  .mc-context-section--compact .floating-sticky-row {
    background: var(--color-bg-primary);
  }

  /* ========== PROJECTS TAB - MOBILE ========== */

  /* Project row: clean card-like appearance */
  .mc-project-row-compact {
    flex-wrap: wrap;
    padding: 14px 16px;
    background: var(--color-bg-primary);
    border-radius: var(--radius-lg);
    margin-bottom: 8px;
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-xs);
  }

  /* Hide hover actions on mobile - tap opens detail view */
  /* Double class selector for specificity over hover states */
  .mc-project-row-compact.mc-project-row-compact .mc-project-actions,
  .mc-project-row-compact .mc-project-actions[class] {
    display: none;
  }

  /* Always show meta on mobile (no hover state) */
  .mc-project-row-compact.mc-project-row-compact .mc-project-meta,
  .mc-project-row-compact .mc-project-meta[class] {
    display: flex;
    margin-left: auto;
  }

  /* Title group: allow name to wrap, limit badges */
  .mc-project-title-group {
    flex: 1;
    min-width: 0;
    flex-wrap: wrap;
    gap: 6px;
    row-gap: 4px;
  }

  .mc-project-name {
    width: 100%;
    font-size: 15px;
    font-weight: 500;
    line-height: 1.3;
    margin-bottom: 2px;
  }

  /* Show max 2 department badges on mobile */
  .mc-project-dept-badge {
    font-size: 11px;
    padding: 2px 6px;
  }

  .mc-project-dept-badge:nth-child(n+4) {
    display: none;
  }

  /* Meta: compact right-aligned */
  .mc-project-meta {
    flex-shrink: 0;
    gap: 6px;
  }

  .mc-project-decision-count {
    font-size: 13px;
    min-width: 20px;
  }

  .mc-project-time {
    font-size: 12px;
    color: var(--color-text-tertiary);
  }

  /* Status dot: slightly larger for visibility */
  .mc-project-row-compact .mc-status-dot {
    width: 8px;
    height: 8px;
    flex-shrink: 0;
  }

  /* ========== PLAYBOOKS TAB - MOBILE ========== */

  /* Playbook group headers */
  .mc-playbook-group {
    margin-bottom: 20px;
  }

  .mc-group-title {
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-tertiary);
    margin-bottom: 10px;
    padding: 0 4px;
  }

  .mc-group-count {
    font-size: 12px;
    font-weight: 400;
  }

  /* Playbook rows: simplified cards */
  .mc-elegant-row {
    flex-wrap: wrap;
    padding: 14px 16px;
    background: var(--color-bg-primary);
    border-radius: var(--radius-lg);
    margin-bottom: 8px;
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-xs);
    row-gap: 8px;
  }

  /* Hide action buttons on mobile - tap opens detail */
  /* Double class for specificity over hover states */
  .mc-elegant-row.mc-elegant-row .mc-elegant-actions,
  .mc-elegant-row .mc-elegant-actions[class] {
    display: none;
  }

  /* Activity tab: SHOW source link on mobile - important for navigation */
  /* Triple selector to override the hide rule above */
  .mc-activity .mc-elegant-row.mc-elegant-row .mc-elegant-actions,
  .mc-activity.mc-activity .mc-elegant-row .mc-elegant-actions {
    display: flex;
    position: static;
    opacity: 1;
    background: transparent;
    padding-left: 0;
    margin-left: auto;
    flex-shrink: 0;
  }

  /* Activity source button styling on mobile */
  .mc-activity .mc-text-btn.source {
    font-size: 12px;
    padding: 6px 10px;
    background: var(--color-blue-50);
    border-radius: var(--radius-md);
    color: var(--color-blue-600);
    font-weight: 500;
  }

  /* Content layout - column on mobile for clean stacking */
  .mc-elegant-content {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
  }

  /* Title: full width, truncated */
  .mc-elegant-title {
    width: 100%;
    font-size: 15px;
    font-weight: 500;
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Badges row: horizontal, left-aligned under title */
  .mc-elegant-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    align-items: center;
  }

  /* Department badges: smaller */
  .mc-elegant-dept {
    font-size: 11px;
    padding: 2px 6px;
    border-radius: var(--radius-sm);
  }

  /* Show max 2 department badges */
  .mc-elegant-dept:nth-of-type(n+3) {
    display: none;
  }

  /* Type badge: subtle */
  .mc-elegant-badge {
    font-size: 10px;
    padding: 2px 6px;
  }

  /* Hide type dot on mobile - badge is enough */
  .mc-elegant-row .mc-type-dot {
    display: none;
  }

  /* ========== DECISIONS TAB - MOBILE ========== */

  /* Decisions row: clean card */
  .mc-decision-row {
    flex-wrap: wrap;
    padding: 14px 16px;
    background: var(--color-bg-primary);
    border-radius: var(--radius-lg);
    margin-bottom: 8px;
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-xs);
    row-gap: 8px;
  }

  /* Hide all action buttons on mobile */
  /* Double class for specificity over hover states */
  .mc-decision-row.mc-decision-row .mc-elegant-actions,
  .mc-decision-row.mc-decision-row .mc-elegant-right .mc-elegant-actions {
    display: none;
  }

  /* Show date, hide it when it would show actions */
  .mc-decision-row.mc-decision-row .mc-elegant-date,
  .mc-decision-row .mc-elegant-date[class] {
    display: block;
    opacity: 1;
  }

  /* Right side: just the date */
  .mc-decision-row .mc-elegant-right {
    display: flex;
    align-items: center;
    min-width: auto;
  }

  /* Content area */
  .mc-decision-row .mc-elegant-content {
    flex: 1;
    min-width: 0;
  }

  /* Title styling */
  .mc-decision-row .mc-elegant-title {
    font-size: 15px;
    font-weight: 500;
    line-height: 1.3;
    margin-bottom: 4px;
  }

  /* Badges wrap */
  .mc-decision-row .mc-elegant-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }

  /* Status dot: visible on left */
  .mc-decision-row .mc-status-dot {
    flex-shrink: 0;
    width: 8px;
    height: 8px;
    margin-right: 4px;
  }

  /* ========== COMMON LIST IMPROVEMENTS ========== */

  /* Remove border between items when using cards */
  .mc-elegant-list,
  .mc-projects-list {
    padding: 0;
    background: transparent;
    border: none;
    gap: 0;
  }

  /* Search input: larger on mobile */
  .mc-search-input-wrapper {
    height: 44px;
    max-width: none; /* Remove desktop max-width constraint */
    min-width: 0;
  }

  .mc-search-input {
    height: 100%;
    font-size: 16px; /* Prevent iOS zoom */
    padding: 8px 32px 8px 36px; /* Adjust padding for smaller height */
  }

  /* Filter row: more breathing room */
  .mc-decisions-filters,
  .mc-projects-filters {
    gap: 12px;
    margin-bottom: 16px;
  }

  /* Empty filtered state */
  .mc-empty-filtered {
    padding: 32px 16px;
  }
}

/* ============================================================================
   DARK MODE ADJUSTMENTS FOR MOBILE CARDS
   ============================================================================ */

@media (max-width: 768px) {
  .dark .mc-project-row-compact,
  .dark .mc-elegant-row,
  .dark .mc-decision-row {
    background: var(--color-bg-secondary);
    border-color: var(--color-border);
    box-shadow: var(--shadow-sm);
  }

  .dark .mc-project-row-compact:active,
  .dark .mc-elegant-row:active,
  .dark .mc-decision-row:active {
    background: var(--color-bg-tertiary);
  }
}

/* ============================================================================
   ACTIVE/TAP STATE FOR MOBILE CARDS
   ============================================================================ */

@media (max-width: 768px) {
  .mc-project-row-compact:active,
  .mc-elegant-row:active,
  .mc-decision-row:active {
    background: var(--color-bg-hover);
    transform: scale(0.99);
  }
}

/* ============================================================================
   MOBILE NAVIGATION - Back Button
   ============================================================================ */

/* Mobile back button - only visible on mobile */
.mc-mobile-back-btn {
  display: none; /* Hidden by default (desktop) */
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  background: transparent;
  border: none;
  color: white;
  cursor: pointer;
  border-radius: var(--radius-default);
  transition: background 0.15s ease;
  flex-shrink: 0;
}

.mc-mobile-back-btn:hover {
  background: rgba(255, 255, 255, 0.1);
}

.mc-mobile-back-btn:active {
  background: rgba(255, 255, 255, 0.15);
  transform: scale(0.98);
}

/* Show on mobile, position back button, keep company switcher */
@media (max-width: 768px) {
  .mc-mobile-back-btn {
    display: flex;
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    z-index: var(--z-elevated);
  }

  .mc-dismiss-hint {
    display: none;
  }

  /* Mobile header layout - stack vertically, center content */
  .mc-header {
    flex-direction: column;
    align-items: center;
    gap: 10px;
    padding-top: 20px;
  }

  /* Hide title row on mobile, just show company switcher */
  .mc-title-row {
    display: none;
  }

  /* Company switcher takes center stage on mobile */
  .mc-company-switcher {
    order: -1;
  }

  /* Hide desktop close button on mobile (use back button instead) */
  .mc-close-btn {
    display: none;
  }
}
