/* =============================================================================
   TABLE OF CONTENTS - Dark Mode Styles
   All dark mode overrides for base, mobile, and variant TOC styles
   ============================================================================= */

/* =============================================================================
   DARK MODE - Floating TOC (Desktop)
   ============================================================================= */

.dark .stage3-floating-toc,
[data-theme='dark'] .stage3-floating-toc {
  background: var(--overlay-black-60);
  border-color: var(--overlay-white-8);
}

.dark .stage3-floating-toc:hover,
[data-theme='dark'] .stage3-floating-toc:hover {
  background: var(--overlay-black-80);
}

.dark .stage3-floating-toc.collapsed:hover,
[data-theme='dark'] .stage3-floating-toc.collapsed:hover {
  background: var(--overlay-black-80);
}

.dark .stage3-toc-header {
  border-block-end-color: var(--overlay-white-5);
}

.dark .stage3-toc-title {
  color: var(--color-slate-500);
}

.dark .stage3-toc-toggle {
  background: var(--overlay-black-90);
  border-color: var(--overlay-white-10);
  color: var(--color-slate-500);
}

.dark .stage3-toc-toggle:hover {
  background: var(--overlay-black-80);
  color: var(--color-slate-400);
}

.dark .stage3-toc-link:hover {
  background: var(--overlay-white-5);
}

.dark .stage3-toc-dot {
  background: var(--color-slate-500);
}

.dark .stage3-toc-text {
  color: var(--color-slate-500);
}

.dark .stage3-toc-link:hover .stage3-toc-dot {
  background: var(--color-slate-400);
}

.dark .stage3-toc-link:hover .stage3-toc-text {
  color: var(--color-slate-300);
}

.dark .stage3-toc-link.active {
  background: var(--overlay-emerald-10);
}

.dark .stage3-toc-link.active .stage3-toc-dot {
  background: var(--color-emerald-400);
  box-shadow: 0 0 0 3px var(--overlay-emerald-20);
}

.dark .stage3-toc-link.active .stage3-toc-text {
  color: var(--color-emerald-400);
}

/* =============================================================================
   DARK MODE - Mobile Trigger
   ============================================================================= */

.dark .stage3-mobile-toc-trigger,
[data-theme='dark'] .stage3-mobile-toc-trigger {
  background: var(--overlay-black-80);
  color: var(--color-text-secondary);
  box-shadow:
    var(--shadow-md),
    inset 0 1px 0 var(--overlay-white-5);
}

.dark .stage3-mobile-toc-trigger:hover,
[data-theme='dark'] .stage3-mobile-toc-trigger:hover {
  box-shadow:
    var(--shadow-lg),
    inset 0 1px 0 var(--overlay-white-8);
}

.dark .stage3-mobile-toc-progress,
[data-theme='dark'] .stage3-mobile-toc-progress {
  background: var(--color-border);
}

.dark .stage3-mobile-toc-icon,
[data-theme='dark'] .stage3-mobile-toc-icon {
  color: var(--color-text-tertiary);
}

/* =============================================================================
   DARK MODE - Mobile Sheet
   ============================================================================= */

.dark .stage3-mobile-outline-overlay,
[data-theme='dark'] .stage3-mobile-outline-overlay {
  background: var(--overlay-black-70);
}

.dark .stage3-mobile-outline-sheet,
[data-theme='dark'] .stage3-mobile-outline-sheet {
  background: var(--color-bg-primary);
  box-shadow: var(--shadow-xl);
}

/* List container background in dark mode */
.dark .stage3-mobile-outline-list,
[data-theme='dark'] .stage3-mobile-outline-list {
  background: var(--color-bg-primary);
}

/* Note: Base styles for handle, header, title, close, indicator, number
   all use semantic tokens and auto-adapt. Only active/special states need overrides. */

/* Base link background in dark mode - prevents gap artifacts between items */
.dark .stage3-mobile-outline-link,
[data-theme='dark'] .stage3-mobile-outline-link {
  background: var(--color-bg-primary);
}

.dark .stage3-mobile-outline-link.active,
[data-theme='dark'] .stage3-mobile-outline-link.active {
  background: var(--overlay-emerald-10);
}

.dark .stage3-mobile-outline-link.active .stage3-mobile-link-indicator,
[data-theme='dark'] .stage3-mobile-outline-link.active .stage3-mobile-link-indicator {
  background: var(--color-emerald-400);
  box-shadow: 0 0 12px rgb(var(--color-emerald-500-rgb), 0.4);
}

.dark .stage3-mobile-outline-link.active .stage3-mobile-link-text,
[data-theme='dark'] .stage3-mobile-outline-link.active .stage3-mobile-link-text {
  color: var(--color-emerald-400);
}

.dark .stage3-mobile-outline-link.active .stage3-mobile-link-number,
[data-theme='dark'] .stage3-mobile-outline-link.active .stage3-mobile-link-number {
  background: var(--overlay-emerald-15);
  color: var(--color-emerald-400);
}

/* =============================================================================
   DARK MODE - Sticky Variant
   ============================================================================= */

.dark .toc-sticky-trigger,
[data-theme='dark'] .toc-sticky-trigger {
  background: var(--overlay-black-80);
  border-color: var(--overlay-white-8);
  color: var(--color-slate-400);
  box-shadow:
    var(--shadow-md),
    inset 0 1px 0 var(--overlay-white-5);
}

.dark .toc-sticky-trigger:hover,
[data-theme='dark'] .toc-sticky-trigger:hover {
  color: var(--color-slate-300);
  box-shadow:
    var(--shadow-lg),
    inset 0 1px 0 var(--overlay-white-8);
}

.dark .toc-sticky-progress,
[data-theme='dark'] .toc-sticky-progress {
  background: var(--color-slate-700);
}

.dark .toc-sticky-dropdown,
[data-theme='dark'] .toc-sticky-dropdown {
  /* SOLID background to prevent content bleeding through gaps between items */
  background: var(--color-bg-primary);
  border-color: var(--overlay-white-8);
  box-shadow: var(--shadow-xl);
}

.dark .toc-sticky-header,
[data-theme='dark'] .toc-sticky-header {
  border-block-end-color: var(--overlay-white-5);
}

.dark .toc-sticky-title,
[data-theme='dark'] .toc-sticky-title {
  color: var(--color-slate-500);
}

.dark .toc-sticky-link:hover,
[data-theme='dark'] .toc-sticky-link:hover {
  background: var(--overlay-white-5);
}

.dark .toc-sticky-dot,
[data-theme='dark'] .toc-sticky-dot {
  background: var(--color-slate-600);
}

.dark .toc-sticky-text,
[data-theme='dark'] .toc-sticky-text {
  color: var(--color-slate-400);
}

.dark .toc-sticky-link:hover .toc-sticky-dot,
[data-theme='dark'] .toc-sticky-link:hover .toc-sticky-dot {
  background: var(--color-slate-500);
}

.dark .toc-sticky-link:hover .toc-sticky-text,
[data-theme='dark'] .toc-sticky-link:hover .toc-sticky-text {
  color: var(--color-slate-300);
}

.dark .toc-sticky-link.active,
[data-theme='dark'] .toc-sticky-link.active {
  background: var(--overlay-indigo-15);
}

.dark .toc-sticky-link.active .toc-sticky-dot,
[data-theme='dark'] .toc-sticky-link.active .toc-sticky-dot {
  background: var(--color-iris-400);
  box-shadow: 0 0 0 2px var(--overlay-indigo-30, rgb(var(--color-indigo-rgb), 0.3));
}

.dark .toc-sticky-link.active .toc-sticky-text,
[data-theme='dark'] .toc-sticky-link.active .toc-sticky-text {
  color: var(--color-iris-400);
}

/* =============================================================================
   DARK MODE - Inline Variant
   ============================================================================= */

.dark .toc-inline,
[data-theme='dark'] .toc-inline {
  background: var(--overlay-black-60);
  border-color: var(--overlay-white-8);
}

.dark .toc-inline-header,
[data-theme='dark'] .toc-inline-header {
  border-block-end-color: var(--overlay-white-5);
}

.dark .toc-inline-title,
[data-theme='dark'] .toc-inline-title {
  color: var(--color-slate-500);
}

.dark .toc-inline-link:hover,
[data-theme='dark'] .toc-inline-link:hover {
  background: var(--overlay-white-5);
}

.dark .toc-inline-dot,
[data-theme='dark'] .toc-inline-dot {
  background: var(--color-slate-600);
}

.dark .toc-inline-text,
[data-theme='dark'] .toc-inline-text {
  color: var(--color-slate-400);
}

.dark .toc-inline-link.active,
[data-theme='dark'] .toc-inline-link.active {
  background: var(--overlay-indigo-15);
}

.dark .toc-inline-link.active .toc-inline-dot,
[data-theme='dark'] .toc-inline-link.active .toc-inline-dot {
  background: var(--color-iris-400);
}

.dark .toc-inline-link.active .toc-inline-text,
[data-theme='dark'] .toc-inline-link.active .toc-inline-text {
  color: var(--color-iris-400);
}
