/* Small screens: See Stage2MobileSmall.css */
@import url('./Stage2MobileSmall.css');

/* =============================================================================
   TABLE SCROLL WRAPPER - Isolates table scrolling from page scroll
   ============================================================================= */

.stage2 .table-scroll-wrapper {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  margin: var(--space-3) 0;
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);

  /* Prevent touch events from propagating to parent */
  overscroll-behavior-x: contain;
}

.stage2 .table-scroll-wrapper table {
  margin: 0;
  border: none;
  border-radius: 0;
  width: max-content;
  min-width: 100%;
}

/* Mobile: scroll shadows to hint at scrollable content */
@media (width <= 640px) {
  .stage2 .table-scroll-wrapper {
    background:
      linear-gradient(to right, var(--color-bg-primary) 30%, transparent),
      linear-gradient(to right, transparent, var(--color-bg-primary) 70%) 100% 0,
      linear-gradient(to right, var(--overlay-black-10), transparent),
      linear-gradient(to right, transparent, var(--overlay-black-10)) 100% 0;
    background-repeat: no-repeat;
    background-size:
      40px 100%,
      40px 100%,
      14px 100%,
      14px 100%;
    background-attachment: local, local, scroll, scroll;
  }

  .dark .stage2 .table-scroll-wrapper {
    background:
      linear-gradient(to right, var(--color-bg-primary) 30%, transparent),
      linear-gradient(to right, transparent, var(--color-bg-primary) 70%) 100% 0,
      linear-gradient(to right, var(--overlay-white-5), transparent),
      linear-gradient(to right, transparent, var(--overlay-white-5)) 100% 0;
    background-repeat: no-repeat;
    background-size:
      40px 100%,
      40px 100%,
      14px 100%,
      14px 100%;
    background-attachment: local, local, scroll, scroll;
  }

  .stage2-content .table-scroll-wrapper th,
  .stage2-content .table-scroll-wrapper td {
    padding: var(--space-2) var(--space-2-5);
    font-size: var(--text-xs-plus);
    white-space: nowrap;
  }

  .stage2 .table-scroll-wrapper td:first-child {
    white-space: normal;
    min-width: 80px;
    max-width: 120px;
  }
}

/* =============================================================================
   MOBILE RESPONSIVE - Full mobile overhaul for Stage 2
   ============================================================================= */

@media (width <= 640px) {
  /* Stage container */
  .stage2 {
    padding: var(--space-3);
  }

  /* Stage title - ensure single line on mobile */
  .stage2 .stage-title {
    gap: var(--gap-xs-plus);
  }

  /* Scale down the title icon slightly */
  .stage2-header .stage-title > svg {
    width: 16px;
    height: 16px;
  }

  /* Hide conversation title topic on mobile to save space */
  .stage2 .stage-topic {
    display: none;
  }

  /* Collapse arrow - smaller */
  .stage2 .collapse-arrow {
    font-size: var(--text-2xs);
  }

  /* Winner badge - more compact on mobile with smaller icons */
  .stage2-winner {
    padding: var(--space-1) var(--space-1);
    gap: var(--gap-xs);
    border-radius: var(--radius-md);
  }

  .stage2 .stage2-winner svg {
    width: 12px;
    height: 12px;
  }

  .stage2-winner .winner-model-icon {
    width: 14px;
    height: 14px;
  }

  /* Tabs - compact wrapping pills to match Stage 1 exactly */
  .stage2 .tabs {
    display: flex;
    flex-wrap: wrap;
    gap: var(--gap-xs-plus);
    margin-block: 10px var(--space-3);
  }

  .stage2 .tab {
    /* Match Stage 1 pills exactly */
    padding: var(--space-1-5) var(--space-2-5);
    font-size: var(--text-xs);
    line-height: 1;
  }

  .stage2 .tab .tab-icon-wrapper {
    width: 16px;
    height: 16px;
  }

  .stage2 .tab .tab-status-badge {
    /* Hide badge on mobile to match Stage 1 simplicity */
    display: none;
  }

  .stage2 .tab .tab-model-icon {
    width: 16px;
    height: 16px;
  }

  /* Tab content - more padding for readability */
  .stage2 .tab-content {
    padding: var(--space-3-5);
  }

  /* Model info header */
  .ranking-model {
    flex-wrap: wrap;
    gap: var(--gap-sm);
    margin-bottom: var(--space-3-5);
  }

  .stage2 .model-info {
    font-size: var(--text-sm);
    gap: var(--gap-sm);
  }

  .stage2 .model-info-icon {
    width: 20px;
    height: 20px;
  }

  /* Copy button - proper touch target */
  .stage2 .copy-btn {
    min-height: 44px;
    min-width: 44px;
    padding: var(--space-2-5);
  }

  /* Ranking content - readable typography */
  .ranking-content {
    font-size: var(--text-sm-plus);
    line-height: 1.65;
  }

  /* ===========================================
     AGGREGATE RANKINGS - Vertical cards
     =========================================== */

  .aggregate-rankings {
    padding: var(--space-3-5);
    margin-bottom: var(--space-4);
  }

  .aggregate-rankings h4 {
    font-size: var(--text-sm);
    margin-bottom: var(--space-3);
  }

  .aggregate-list {
    gap: var(--gap-sm);
  }

  /* Each ranking item - compact horizontal layout on mobile */
  .aggregate-item {
    flex-direction: row;
    align-items: center;
    padding: var(--space-3) var(--space-3-5);
    gap: var(--gap);
    border-radius: var(--radius-md);
  }

  /* Rank position - prominent but compact */
  .rank-position {
    font-size: var(--text-base);
    font-weight: 700;
    min-width: 32px;
    color: var(--color-blue-600);
  }

  /* Model name - takes remaining space */
  .rank-model {
    flex: 1;
    font-size: var(--text-sm);
    font-family: var(--font-sans, system-ui);
    gap: var(--gap-xs-plus);
  }

  .stage2 .rank-model-icon {
    width: 18px;
    height: 18px;
  }

  /* Score - right aligned */
  .rank-score {
    font-size: var(--text-sm);
    font-weight: 600;
    margin-left: auto;
  }

  /* Hide count on mobile to save space */
  .rank-count {
    display: none;
  }

  /* Parsed ranking section */
  .parsed-ranking {
    margin-top: var(--space-3-5);
    padding-top: var(--space-3-5);
  }

  .parsed-ranking ol {
    padding-left: var(--space-5);
  }

  .parsed-ranking li {
    font-size: var(--text-sm);
    padding: var(--space-1) 0;
  }

  /* Winner badge in header */
  .stage2-winner {
    padding: var(--space-1-5) var(--space-2-5);
  }

  .stage2-winner .winner-model-icon {
    width: 20px;
    height: 20px;
  }

  /* Collapsed summary */
  .stage2 .collapsed-summary {
    font-size: var(--text-xs);
  }

  /* Section titles */
  .stage2-section-title {
    font-size: var(--text-xs-plus);
    margin: var(--space-4) 0 10px;
  }

  /* Status badges */
  .stage2 .complete-badge,
  .stage2 .error-badge {
    font-size: var(--text-2xs);
    padding: var(--space-1) var(--space-1-5);
  }
}
